<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RLHF 인간 피드백 시스템</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- 커스텀 CSS -->
    <link href="/static/css/styles.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <!-- 헤더 -->
        <header class="bg-primary text-white py-3 mb-4">
            <div class="container">
                <h1 class="h3 mb-0">
                    <i class="fa-solid fa-cube me-2"></i>
                    RLHF 인간 피드백 시스템
                </h1>
            </div>
        </header>

        <!-- 세션 통계 -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title text-primary" id="total-comparisons">0</h5>
                        <p class="card-text">총 비교 횟수</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title text-info" id="session-progress">0%</h5>
                        <p class="card-text">진행률</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title text-success" id="current-pair">대기 중</h5>
                        <p class="card-text">현재 비교</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center">
                    <div class="card-body">
                        <h5 class="card-title text-warning">연결됨</h5>
                        <p class="card-text">서버 상태</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 비교 영역 -->
        <div class="row">
            <!-- 디자인 A -->
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">디자인 A</h5>
                    </div>
                    <div class="viewer-container" id="viewer-a">
                        <div class="loading-overlay" id="loading-a">
                            <div class="text-center">
                                <div class="spinner-border mb-2"></div>
                                <div>로딩 중...</div>
                            </div>
                        </div>
                        <div class="viewer-controls">
                            <button class="btn" onclick="resetView('a')" title="뷰 리셋">
                                <i class="fa-solid fa-home"></i>
                            </button>
                            <button class="btn" onclick="toggleWireframe('a')" title="와이어프레임">
                                <i class="fa-solid fa-vector-square"></i>
                            </button>
                            <button class="btn" onclick="captureView('a')" title="스크린샷">
                                <i class="fa-solid fa-camera"></i>
                            </button>
                        </div>
                        <button class="selection-btn" onclick="selectDesign('a')">
                            <i class="fa-solid fa-check me-2"></i>디자인 A 선택
                        </button>
                    </div>
                    <div class="metrics-panel">
                        <div class="metric-item">
                            <span>건폐율 (BCR)</span>
                            <span class="metric-value" id="bcr-a">-</span>
                        </div>
                        <div class="metric-item">
                            <span>용적률 (FAR)</span>
                            <span class="metric-value" id="far-a">-</span>
                        </div>
                        <div class="metric-item">
                            <span>일조량</span>
                            <span class="metric-value" id="sunlight-a">-</span>
                        </div>
                        <div class="metric-item">
                            <span>SV Ratio</span>
                            <span class="metric-value" id="svr-a">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 디자인 B -->
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0">디자인 B</h5>
                    </div>
                    <div class="viewer-container" id="viewer-b">
                        <div class="loading-overlay" id="loading-b">
                            <div class="text-center">
                                <div class="spinner-border mb-2"></div>
                                <div>로딩 중...</div>
                            </div>
                        </div>
                        <div class="viewer-controls">
                            <button class="btn" onclick="resetView('b')" title="뷰 리셋">
                                <i class="fa-solid fa-home"></i>
                            </button>
                            <button class="btn" onclick="toggleWireframe('b')" title="와이어프레임">
                                <i class="fa-solid fa-vector-square"></i>
                            </button>
                            <button class="btn" onclick="captureView('b')" title="스크린샷">
                                <i class="fa-solid fa-camera"></i>
                            </button>
                        </div>
                        <button class="selection-btn" onclick="selectDesign('b')">
                            <i class="fa-solid fa-check me-2"></i>디자인 B 선택
                        </button>
                    </div>
                    <div class="metrics-panel">
                        <div class="metric-item">
                            <span>건폐율 (BCR)</span>
                            <span class="metric-value" id="bcr-b">-</span>
                        </div>
                        <div class="metric-item">
                            <span>용적률 (FAR)</span>
                            <span class="metric-value" id="far-b">-</span>
                        </div>
                        <div class="metric-item">
                            <span>일조량</span>
                            <span class="metric-value" id="sunlight-b">-</span>
                        </div>
                        <div class="metric-item">
                            <span>SV Ratio</span>
                            <span class="metric-value" id="svr-b">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 컨트롤 -->
        <div class="row">
            <div class="col-12 text-center">
                <button class="btn btn-secondary me-2" onclick="skipComparison()">
                    <i class="fa-solid fa-forward me-1"></i>건너뛰기
                </button>
                <button class="btn btn-info me-2" onclick="showHelp()">
                    <i class="fa-solid fa-question-circle me-1"></i>도움말
                </button>
                <button class="btn btn-primary" onclick="loadNextComparison()">
                    <i class="fa-solid fa-refresh me-1"></i>새로고침
                </button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <!-- Three.js (로컬 포함) -->
    <script src="/static/js/three.min.js"></script>
    <script src="/static/js/OrbitControls.js"></script>
    
    <!-- 메인 애플리케이션 JS -->
    <script src="/static/js/main.js"></script>
</body>
</html>